(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{75:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var o=n(2),a=n(6),s=(n(0),n(98)),r={id:"dropdown",title:"Implementing a Dropdown",sidebar_label:"Dropdown"},i={unversionedId:"recipes/dropdown",id:"recipes/dropdown",isDocsHomePage:!1,title:"Implementing a Dropdown",description:"Implementing a Dropdown/Select component from scratch is always a big challenge with a lot of things to consider such as accessibility, autocomplete feature, multi-selection feature, native support (for touch devices mainly).",source:"@site/docs/recipes/dropdown.md",permalink:"/docs/recipes/dropdown",sidebar_label:"Dropdown",sidebar:"docs",previous:{title:"Setting Up Redux",permalink:"/docs/recipes/setting-up-redux"},next:{title:"This document",permalink:"/docs/this-document"}},l=[{value:"What is Downshift \ud83c\udfce?",id:"what-is-downshift-",children:[]},{value:"How it works?",id:"how-it-works",children:[]},{value:"Walk-through",id:"walk-through",children:[{value:"1. Install <code>downshift</code>",id:"1-install-downshift",children:[]},{value:"2. Example",id:"2-example",children:[]}]}],c={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(o.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Implementing a Dropdown/Select component from scratch is always a big challenge with a lot of things to consider such as accessibility, autocomplete feature, multi-selection feature, native support (for touch devices mainly)."),Object(s.b)("p",null,"There are open-source libraries like ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/JedWatson/react-select"}),"react-select")," that help us out on this task but usually their API is not that friendly. This happens because these libraries will render the input and the menu for themselves. For some of them, we are allowed to change what we want to render but it will render on a specific location. Others provide a list of ",Object(s.b)("inlineCode",{parentName:"p"},"classNames")," that can be used to change the style of the rendered component the way it fits best for us."),Object(s.b)("p",null,"The main problem of these libraries is the lack of flexibility while using them to build our custom dropdown. That's where ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift"}),"downshift")," comes into play."),Object(s.b)("h3",{id:"what-is-downshift-"},"What is Downshift \ud83c\udfce?"),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Primitives to build simple, flexible, WAI-ARIA compliant React autocomplete, combobox or select dropdown components.")),Object(s.b)("p",null,"This is how ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://kentcdodds.com/"}),"Kent C. Dodds")," describes his library."),Object(s.b)("p",null,"Downshift mainly takes care of three things: ",Object(s.b)("strong",{parentName:"p"},"managing state"),", ",Object(s.b)("strong",{parentName:"p"},"user interactions")," and ",Object(s.b)("strong",{parentName:"p"},"accessibility"),". The rendering task is all up to the developer. This is possible because it uses both the ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://reactjs.org/docs/render-props.html"}),"render prop pattern")," and the ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://kentcdodds.com/blog/how-to-give-rendering-control-to-users-with-prop-getters"}),"prop getters concept")," at its core."),Object(s.b)("p",null,"You can see its documentation ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift#readme"}),"here")," and read ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://kentcdodds.com/blog/introducing-downshift-for-react"}),"this blog post")," for further details."),Object(s.b)("h3",{id:"how-it-works"},"How it works?"),Object(s.b)("p",null,"Downshift provides a ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift#downshift-component"}),Object(s.b)("inlineCode",{parentName:"a"},"<Downshift>")," component")," responsible for providing select and autocomplete/combobox logic as a render prop. It also provides a ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift#the-react-hooks-api"}),"set of hooks")," holding dedicated logic to each behavior."),Object(s.b)("h2",{id:"walk-through"},"Walk-through"),Object(s.b)("h3",{id:"1-install-downshift"},"1. Install ",Object(s.b)("inlineCode",{parentName:"h3"},"downshift")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-sh"}),"npm i downshift --save\n")),Object(s.b)("h3",{id:"2-example"},"2. Example"),Object(s.b)("p",null,"Let's say we need to develop a Dropdown component and we have the following data:"),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),'const items = [\n    {\n        label: "January",\n        value: "january"\n    },\n    {\n        label: "February",\n        value: "february"\n    },\n    {\n        label: "March",\n        value: "march"\n    },\n];\n')),Object(s.b)("p",null,"We already have our data. What about now? The following code block is a complete example of how to develop a Dropdown component. Check the example first and then follow the explanation to better understand it."),Object(s.b)("h4",{id:"1-component"},"1. Component"),Object(s.b)("p",null,"\u2139\ufe0f We are using ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect"}),Object(s.b)("inlineCode",{parentName:"a"},"useSelect")," hook")," to build our example. You can use the ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift#downshift-component"}),Object(s.b)("inlineCode",{parentName:"a"},"<Downshift>")," component")," as well to achieve the same result. Check an example ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift#usage"}),"here"),"."),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Dropdown.js file\n\nimport React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelect } from 'downshift';\nimport classNames from 'classnames';\nimport DropdownItem from 'path-to-dropdown-item';\n\nimport styles from './Dropdown.module.css';\n\nconst itemToString = (item) => item?.value ?? '';\nconst placeholderLabel = 'Choose your option';\n\nconst Dropdown = ({\n    id,\n    items,\n    className,\n    onStateChange,\n    placeholderLabel,\n    defaultSelectedItem,\n    ...rest,\n}) => {\n    const {\n        isOpen,\n        selectedItem,\n        highlightedIndex,\n        getMenuProps,\n        getItemProps,\n        getToggleButtonProps,\n    } = useSelect({ id, itemToString, items, onStateChange, defaultSelectedItem });\n\n    const renderDropdownItems = useCallback(() => items.map((item, index) => (\n        <DropdownItem\n            item={ item }\n            key={ `dropdown-item-${index}` }\n            selected={ selectedItem === item }\n            highlighted={ highlightedIndex === index }\n            { ...getItemProps({ item, index }) } />\n    )), [highlightedIndex, getItemProps, selectedItem, items]);\n\n    return (\n        <div { ...rest } className={ classNames(styles.container, className) }>\n            <button\n                className={ classNames(styles.trigger, { [styles.isOpen]: isOpen }) }\n                { ...getToggleButtonProps() }>\n                { selectedItem?.label ?? placeholderLabel }\n            </button>\n            <ul className={ styles.menu } { ...getMenuProps() }>\n                { isOpen && renderDropdownItems() }\n            </ul>\n        </div>\n    );\n};\n\nDropdown.propTypes = {\n    className: PropTypes.string,\n    onStateChange: PropTypes.func,\n    id: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    defaultSelectedItem: PropTypes.any,\n    placeholderLabel: PropTypes.string,\n};\n\nexport default Dropdown;\n")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// DropdownItem.js file\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport styles from './DropdownItem.module.css';\n\nconst DropdownItem = forwardRef(({\n    item,\n    highlighted,\n    selected,\n    className,\n    ...rest\n}, ref) => {\n    const itemClasses = classNames(\n    styles.item,\n    {\n        [styles.highlighted]: highlighted,\n        [styles.selected]: selected,\n    },\n    className);\n\n    return (\n        <li { ...rest } ref={ ref } className={ itemClasses }>\n            { item.label }\n        </li>\n    );\n})\n\nDropdownItem.propTypes = {\n    selected: PropTypes.bool,\n    highlighted: PropTypes.bool,\n    className: PropTypes.string,\n    item: PropTypes.object.isRequired,\n};\n\nDropdownItem.defaultProps = {\n    selected: false,\n    highlighted: false,\n};\n\nexport default DropdownItem;\n")),Object(s.b)("h4",{id:"2-explanation"},"2. Explanation"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Structure")),Object(s.b)("p",null,"Before diving into how the ",Object(s.b)("inlineCode",{parentName:"p"},"useSelect")," hook works, let's check our ",Object(s.b)("inlineCode",{parentName:"p"},"Dropdown.js")," file and let's analyze the structure of our ",Object(s.b)("inlineCode",{parentName:"p"},"Dropdown")," element:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"container ",Object(s.b)("inlineCode",{parentName:"li"},"<div className={ styles.container }>...</div>")," - it is the shell of our Dropdown and wraps both the trigger element and the menu element (",Object(s.b)("inlineCode",{parentName:"li"},"Dropdown.js")," file)"),Object(s.b)("li",{parentName:"ul"},"button ",Object(s.b)("inlineCode",{parentName:"li"},"<button className={ ... }>...</button>")," - this element is responsible for toggling the dropdown menu (",Object(s.b)("inlineCode",{parentName:"li"},"Dropdown.js")," file)"),Object(s.b)("li",{parentName:"ul"},"menu ",Object(s.b)("inlineCode",{parentName:"li"},"<ul className={ styles.menu }>...</ul>")," - this element represents the menu and it contains the list of items (",Object(s.b)("inlineCode",{parentName:"li"},"Dropdown.js")," file)"),Object(s.b)("li",{parentName:"ul"},"item ",Object(s.b)("inlineCode",{parentName:"li"},"<li className={ ... }>...</li>")," - this element represents each menu item (",Object(s.b)("inlineCode",{parentName:"li"},"DropdownItem.js")," file)")),Object(s.b)("p",null,"\u26a0\ufe0f These elements are the ones we think that better represents our dropdown semantically. However, you can change the elements as long as you pass them the right props. E.g.: you can replace the ",Object(s.b)("inlineCode",{parentName:"p"},"<button { ...getToggleButtonProps() }>")," for a ",Object(s.b)("inlineCode",{parentName:"p"},"<div { ...getToggleButtonProps() }>"),". If you make changes like this, please check if accessibility is still working as expected. In this specific case, you would need to add ",Object(s.b)("inlineCode",{parentName:"p"},'tabIndex="0"')," prop to your ",Object(s.b)("inlineCode",{parentName:"p"},"<div>")," so that it becomes focusable in sequential keyboard navigation. Furthermore, you would also need to add ",Object(s.b)("inlineCode",{parentName:"p"},'role="button"')," so that your element appears as a button control to the screen reader."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"strong"},"useSelect")," hook")),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"Props")),Object(s.b)("p",null,"It's important to know that while using Downshift we are dealing with a lot of props. Some of them are considered ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#basic-props"}),"basic"),", other ones are considered ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#advanced-props"}),"advanced"),". We need to pass some of them to ",Object(s.b)("inlineCode",{parentName:"p"},"useSelect"),", in order to get other ones. Long story short: some props are returned by this hook, other ones need to be passed to it."),Object(s.b)("p",null,"Looking at our example in ",Object(s.b)("inlineCode",{parentName:"p"},"Dropdown.js")," file, we are passing ",Object(s.b)("inlineCode",{parentName:"p"},"items"),", ",Object(s.b)("inlineCode",{parentName:"p"},"itemToString")," and ",Object(s.b)("inlineCode",{parentName:"p"},"onStateChange")," callback. ",Object(s.b)("inlineCode",{parentName:"p"},"useSelect")," is returning ",Object(s.b)("inlineCode",{parentName:"p"},"isOpen"),", ",Object(s.b)("inlineCode",{parentName:"p"},"selectedItem"),", ",Object(s.b)("inlineCode",{parentName:"p"},"highlightedIndex"),", ",Object(s.b)("inlineCode",{parentName:"p"},"getMenuProps"),", ",Object(s.b)("inlineCode",{parentName:"p"},"getItemProps")," and ",Object(s.b)("inlineCode",{parentName:"p"},"getToggleButtonProps")," props."),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"id")," - we are passing an id prop to avoid props mismatch between client-side rendering and server-side rendering. Read this ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/issues/602"}),"downshift/issues/602")," for further details."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"items")," - we are passing our array of items."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"itemToString")," - our array of items contains objects. Downshift needs a string representation for each item to keep accessibility working properly. Read more about it ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#itemtostring"}),"here"),"."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"onStateChange")," - we don't really need this prop for our example to work, but it was added for demonstration purposes. Every time the internal state changes (item is selected, menu is open, menu is closed, etc), the callback will be fired with the new state. If you just want a callback to run when a different item is selected, you can use ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#onselecteditemchange"}),Object(s.b)("inlineCode",{parentName:"a"},"onSelectedItemChange"))," instead.")),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"State")),Object(s.b)("p",null,"Downshift has its own ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#state"}),"internal state")," which is managed internally. We are using the following pieces of it:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"isOpen")," - representing the menu open state. We are using it to toggle our menu and to apply some css to the toggle button."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"selectedItem")," - the currently selected item. We are using it to check whether an item is selected or not and pass the ",Object(s.b)("inlineCode",{parentName:"li"},"selected")," prop (bool) to ",Object(s.b)("inlineCode",{parentName:"li"},"DropdownItem")," so that we can apply some styling to our item."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"highlightedIndex")," - the index of the currently highlighted element. We are using it to check whether an item is highlighted or not and pass the ",Object(s.b)("inlineCode",{parentName:"li"},"highlighted")," prop to ",Object(s.b)("inlineCode",{parentName:"li"},"DropdownItem")," so that we can apply some styling to our item. Please note this prop is updated even with keyboard navigation.")),Object(s.b)("p",null,"\u26a0\ufe0f If you want to control some of these state pieces yourself, you can pass them as prop. E.g.: ",Object(s.b)("inlineCode",{parentName:"p"},"useSelect({ items, isOpen: true })"),". This example would force the menu to always be open."),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"Prop Getters")),Object(s.b)("p",null,"One of the core concepts of this library is ",Object(s.b)("em",{parentName:"p"},"prop getters")," such as ",Object(s.b)("inlineCode",{parentName:"p"},"getToggleButtonProps()")," and ",Object(s.b)("inlineCode",{parentName:"p"},"getMenuProps()"),". These functions must be applied to the proper element and then Downshift will take care of wiring things up and make them work properly. Thus, ",Object(s.b)("inlineCode",{parentName:"p"},"useSelect")," provides us the following ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#prop-getters"}),Object(s.b)("em",{parentName:"a"},"prop getters")),":"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"getToggleButtonProps")," - a props returning function. These returned props must be applied to the menu toggle button element. We are applying it to our ",Object(s.b)("inlineCode",{parentName:"li"},"button")," element. Further details on their ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#gettogglebuttonprops"}),"documentation"),"."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"getItemProps")," - a props returning function. These returned props must be applied to any menu item element. We are applying it to our ",Object(s.b)("inlineCode",{parentName:"li"},"item")," element. Further details on their ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#getitemprops"}),"documentation"),"."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"getLabelProps")," - a props returning function. These returned props must be applied to the label element. Further details ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#getlabelprops"}),"here"),"."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"getMenuProps")," - a props returning function. These returned props must be applied to the menu's root element. Further details ",Object(s.b)("a",Object(o.a)({parentName:"li"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#getmenuprops"}),"here"),".")),Object(s.b)("p",null,Object(s.b)("em",{parentName:"p"},"Actions")),Object(s.b)("p",null,"Although they're not used in this example, there is a set of props, called ",Object(s.b)("em",{parentName:"p"},"actions"),", returned by this hook that can be very useful to change its state imperatively. Here are some examples:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"toggleMenu")," - toggles the menu open state"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"closeMenu")," - closes the menu"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("inlineCode",{parentName:"li"},"reset")," - resets downshift's state")),Object(s.b)("p",null,"\u2139\ufe0f You can see the full list of ",Object(s.b)("em",{parentName:"p"},"actions")," ",Object(s.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/downshift-js/downshift/tree/master/src/hooks/useSelect#actions"}),"here"),"."),Object(s.b)("h4",{id:"2-component-usage"},"2. Component Usage"),Object(s.b)("p",null,"Here is an example of how to use the ",Object(s.b)("inlineCode",{parentName:"p"},"<Dropdown>")," component we've built so far:"),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"import React, { useCallback } from 'react';\nimport items from './items';\nimport Dropdown from './Dropdown';\n\nexport default function App() {\n  const handleStateChange = useCallback((state) => console.log(state), []);\n\n  return (\n    <div>\n      <h2>Dropdown with Downshift \ud83c\udfce</h2>\n      <Dropdown\n        items={ items }\n        id=\"month-switcher\"\n        onStateChange={ handleStateChange } />\n    </div>\n  );\n}\n")),Object(s.b)("h4",{id:"3-native-select-behavior-support"},"3. Native ",Object(s.b)("em",{parentName:"h4"},"select")," behavior support"),Object(s.b)("p",null,"On mobile/touch devices, the use of native ",Object(s.b)("em",{parentName:"p"},"select")," behavior is highly recommended due to UX reasons. To implement that, our ",Object(s.b)("inlineCode",{parentName:"p"},"<Dropdown>")," component is going to need some enhancements. Our approach will place a native select element on top of our trigger button, with the same items that we are passing to our ",Object(s.b)("inlineCode",{parentName:"p"},"<Dropdown>")," component, but it will be invisible."),Object(s.b)("p",null,"Whenever an option is selected, we need to update the internal state of ",Object(s.b)("inlineCode",{parentName:"p"},"Downshift")," so that those changes are reflected on the custom ",Object(s.b)("inlineCode",{parentName:"p"},"<Dropdown>"),"."),Object(s.b)("p",null,"Take a look at the following steps:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"1. Create a ",Object(s.b)("inlineCode",{parentName:"strong"},"<NativeSelect>")," component")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// NativeSelect.js\n\nimport React, { useCallback, forwardRef } from 'react';\nimport PropTypes from 'prop-types';\n\nconst NativeSelect = forwardRef(({\n    items,\n    onChange,\n    placeholderLabel,\n    ...rest,\n}, ref) => {\n    const renderOptions = useCallback(() => {\n        const selectableOptions = items.map((item, index) => (\n            <option\n                value={ item.value }\n                key={ `native-option-${index}` }>\n                { item.label }\n            </option>\n        ));\n\n        if (placeholderLabel) {\n            const placeholderOption = (\n                <option\n                    disabled\n                    value={ placeholderLabel }\n                    key=\"native-option-disabled\">\n                    { placeholderLabel }\n                </option>\n            );\n\n            return [placeholderOption, ...selectableOptions];\n        }\n\n        return selectableOptions;\n    }, [items, placeholderLabel]);\n\n    const handleChange = useCallback((event) => {\n        const selectedItem = items.find((elem) => elem.value === event.target.value);\n\n        onChange && onChange(selectedItem);\n    }, [items, onChange]);\n\n    return (\n        <select\n            { ...rest }\n            ref={ ref }\n            onBlur={ onBlur }\n            className={ className }\n            onChange={ handleChange }\n            value={ selected?.value ?? placeholderLabel }>\n            { renderOptions() }\n        </select>\n    );\n});\n\nNativeSelect.propTypes = {\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    selected: PropTypes.object,\n    className: PropTypes.string,\n    items: PropTypes.array.isRequired,\n    placeholderLabel: PropTypes.string,\n};\n\nexport default NativeSelect;\n")),Object(s.b)("p",null,"\u26a0\ufe0f Please note we are passing a ",Object(s.b)("inlineCode",{parentName:"p"},"placeholderLabel")," so that the native select is similar to the custom dropdown. You might not need it. You must be critical about what makes sense to your case scenario."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"2. Import ",Object(s.b)("inlineCode",{parentName:"strong"},"<NativeSelect>")," component on ",Object(s.b)("inlineCode",{parentName:"strong"},"<Dropdown>")," component")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Dropdown.js file\n\n// ...\nimport NativeSelect from 'path-to-your-native-select';\n")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"3. Add ",Object(s.b)("inlineCode",{parentName:"strong"},"<NativeSelect>")," component")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Dropdown.js file\n\n// ...\n\nconst {\n    // ...\n    closeMenu,\n    toggleMenu,\n} = useSelect({ ... });\n\nconst Dropdown = ({ items, onStateChange, className, ...rest }) => {\n    // ...\n    return (\n        <div { ...rest } className={ classNames(styles.container, className) }>\n            <button\n                className={ classNames(styles.trigger, { [styles.isOpen]: isOpen }) }\n                { ...getToggleButtonProps() }>\n                { selectedItem?.label ?? placeholderLabel }\n            </button>\n            <NativeSelect\n                items={ items }\n                onBlur={ closeMenu }\n                onClick={ toggleMenu }\n                selected={ selectedItem }\n                placeholderLabel={ placeholderLabel } />\n            <ul className={ styles.menu } { ...getMenuProps() }>\n                { isOpen && renderDropdownItems() }\n            </ul>\n        </div>\n    );\n};\n\n// ...\n")),Object(s.b)("p",null,"\u26a0\ufe0f Note we are passing the prop onClick with the ",Object(s.b)("inlineCode",{parentName:"p"},"toggleMenu")," action to toggle the internal ",Object(s.b)("inlineCode",{parentName:"p"},"Downshift")," menu state. We are passing the ",Object(s.b)("inlineCode",{parentName:"p"},"closeMenu")," action to make sure the menu will be closed whenever the ",Object(s.b)("inlineCode",{parentName:"p"},"onBlur")," events fires."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"4. Add a new className to ",Object(s.b)("inlineCode",{parentName:"strong"},"NativeSelect")," so that it gets positioned on top of the custom ",Object(s.b)("inlineCode",{parentName:"strong"},"Dropdown"))),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Dropdown.js file\n\n// ...\n\nconst Dropdown = ({ items, onStateChange, className, ...rest }) => {\n    // ...\n    return (\n        <div ... className={ classNames(styles.container, className) }>\n            // ...\n            <NativeSelect\n                items={ items }\n                onBlur={ closeMenu }\n                onClick={ toggleMenu }\n                selected={ selectedItem }\n                className={ styles.nativeSelect }\n                placeholderLabel={ placeholderLabel } />\n            // ...\n        </div>\n    );\n};\n\n// ...\n")),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-css"}),"/* Dropdown.css file */\n\n.container {\n    /* ... */\n    position: relative;\n}\n\n.nativeSelect {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n}\n")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"5. Pass a ",Object(s.b)("inlineCode",{parentName:"strong"},"onChange")," callback to ",Object(s.b)("inlineCode",{parentName:"strong"},"<NativeSelect>"))),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Dropdown.js file\n\n// ...\n\nconst Dropdown = ({ items, onStateChange, className, ...rest }) => {\n    // ...\n\n    const handleNativeSelectChange = useCallback((selectedItem) => {\n        selectItem(selectedItem);\n        toggleMenu();\n    }, [toggleMenu, selectItem]);\n\n    return (\n        <div ... className={ classNames(styles.container, className) }>\n            // ...\n            <NativeSelect\n                items={ items }\n                onBlur={ closeMenu }\n                onClick={ toggleMenu }\n                selected={ selectedItem }\n                className={ styles.nativeSelect }\n                onChange={ handleNativeSelectChange }\n                placeholderLabel={ placeholderLabel } />\n            // ...\n        </div>\n    );\n};\n\n// ...\n")),Object(s.b)("p",null,"\u26a0\ufe0f ",Object(s.b)("inlineCode",{parentName:"p"},"selectedItem")," property of the internal state needs to be updated. For that, we need to pass an ",Object(s.b)("inlineCode",{parentName:"p"},"onChange")," callback to ",Object(s.b)("inlineCode",{parentName:"p"},"<NativeSelect>"),". Note that we are using the ",Object(s.b)("inlineCode",{parentName:"p"},"selectItem(...)")," action to achieve that."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"6. Add ",Object(s.b)("inlineCode",{parentName:"strong"},"display: none")," to our ",Object(s.b)("inlineCode",{parentName:"strong"},"<Dropdown>")," menu")),Object(s.b)("p",null,"Now, by clicking on the native select, we are toggling the menu state of ",Object(s.b)("inlineCode",{parentName:"p"},"Donwshift"),". We need to hide our custom menu, because we just want the native menu to appear. For that, we need to add ",Object(s.b)("inlineCode",{parentName:"p"},"display: none")," to our ",Object(s.b)("inlineCode",{parentName:"p"},"menu")," element."),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{className:"language-css"}),"/* Dropdown.css file */\n\n.menu {\n    /* ... */\n    display: none;\n}\n")),Object(s.b)("p",null," \u26a0\ufe0f All these changes must only be done when we want to use the native behavior. Let's say we would like to use the native behavior on mobile resolutions only: we must use media queries and apply these changes on that specific resolutions. You might also need to add ",Object(s.b)("inlineCode",{parentName:"p"},"display: none")," to ",Object(s.b)("inlineCode",{parentName:"p"},"NativeSelect")," className for the resolutions where you want to use the custom menu."))}p.isMDXComponent=!0},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var o=n(0),a=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=p(n),d=o,h=b["".concat(r,".").concat(d)]||b[d]||m[d]||s;return n?a.a.createElement(h,i(i({ref:t},c),{},{components:n})):a.a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,r=new Array(s);r[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var c=2;c<s;c++)r[c]=n[c];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);