(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{86:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return a})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var r=t(2),i=t(6),o=(t(0),t(96)),a={id:"inner-vh",title:"Proper vh CSS unit on Mobile",sidebar_label:"Inner vh CSS"},s={unversionedId:"recipes/inner-vh",id:"recipes/inner-vh",isDocsHomePage:!1,title:"Proper vh CSS unit on Mobile",description:"Some mobile browsers define a fixed value for the vh based on the maximum height of the screen. By doing so, the user would not experience jumps on the page once the address bar went out of view. However, in some situations, you want to to target the visible viewport (inner), regardless of the address bar being visible or not.",source:"@site/docs/recipes/inner-vh.md",permalink:"/docs/recipes/inner-vh",sidebar_label:"Inner vh CSS",sidebar:"docs",previous:{title:"Adding a simple REST API",permalink:"/docs/recipes/rest-api"},next:{title:"Adding a splash screen",permalink:"/docs/recipes/splash-screen"}},c=[{value:"Walk-through",id:"walk-through",children:[{value:"1. Install the necessary dependencies",id:"1-install-the-necessary-dependencies",children:[]},{value:"2. Setup <code>inner-vh</code> module",id:"2-setup-inner-vh-module",children:[]},{value:"3. Setup PostCSS to ignore <code>--inner-vh</code>",id:"3-setup-postcss-to-ignore---inner-vh",children:[]},{value:"4. Now use it!",id:"4-now-use-it",children:[]}]}],l={rightToc:c};function p(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Some mobile browsers define a fixed value for the vh based on the maximum height of the screen. By doing so, the user would not experience jumps on the page once the address bar went out of view. However, in some situations, you want to to target the visible viewport (inner), regardless of the address bar being visible or not."),Object(o.b)("p",null,"To address the issue, this recipe allows you to target the inner viewport height using the ",Object(o.b)("inlineCode",{parentName:"p"},"--inner-vh")," CSS variable."),Object(o.b)("p",null,"You may read more at about this subject in the following article: ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://css-tricks.com/the-trick-to-viewport-units-on-mobile/"}),"https://css-tricks.com/the-trick-to-viewport-units-on-mobile/"),"."),Object(o.b)("h2",{id:"walk-through"},"Walk-through"),Object(o.b)("h3",{id:"1-install-the-necessary-dependencies"},"1. Install the necessary dependencies"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"$ npm i inner-vh detect-it\n")),Object(o.b)("h3",{id:"2-setup-inner-vh-module"},"2. Setup ",Object(o.b)("inlineCode",{parentName:"h3"},"inner-vh")," module"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"// www/app/App.js\nimport { innerVh } from 'inner-vh';\nimport { deviceType } from 'detect-it';\n\n// ...\n\nif (typeof window !== 'undefined') {\n    // Apply module that updates the --inner-vh CSS variable.\n    innerVh({\n        customPropertyName: 'inner-vh',\n        // Update --inner-vh on desktop alike always.\n        ignoreCollapsibleUi: deviceType === 'touchOnly',\n        // Seems to be 114px on iOS safari.\n        maximumCollapsibleUiHeight: 120,\n    });\n}\n\n// ...\n")),Object(o.b)("h3",{id:"3-setup-postcss-to-ignore---inner-vh"},"3. Setup PostCSS to ignore ",Object(o.b)("inlineCode",{parentName:"h3"},"--inner-vh")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"'use strict';\n\nmodule.exports = require('@moxy/postcss-preset')({\n    // ...\n    cssVariables: {\n        preserveAtRulesOrder: true,\n        preserve: (declaration) => {\n            // Keep --inner-vh usage intact, useful for mobile.\n            if (!declaration.prop.startsWith('--') && declaration.value.includes('--inner-vh')) {\n                return true;\n            }\n\n            return false;\n        },\n    },\n});\n")),Object(o.b)("h3",{id:"4-now-use-it"},"4. Now use it!"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-css"}),".foo {\n    height: calc(var(--inner-vh, 1vh) * 100);\n}\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\u2139\ufe0f The second argument of var is the fallback, which should be ",Object(o.b)("inlineCode",{parentName:"p"},"1vh"),". This is necessary, because the CSS var is only injected after the module is initialized.")))}p.isMDXComponent=!0},96:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return h}));var r=t(0),i=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=i.a.createContext({}),p=function(e){var n=i.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=p(e.components);return i.a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},b=i.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,a=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(t),b=r,h=u["".concat(a,".").concat(b)]||u[b]||d[b]||o;return t?i.a.createElement(h,s(s({ref:n},l),{},{components:t})):i.a.createElement(h,s({ref:n},l))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,a=new Array(o);a[0]=b;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var l=2;l<o;l++)a[l]=t[l];return i.a.createElement.apply(null,a)}return i.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);